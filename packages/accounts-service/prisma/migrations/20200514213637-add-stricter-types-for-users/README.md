# Migration `20200514213637-add-stricter-types-for-users`

This migration has been generated by Gabriel Mendez at 5/14/2020, 9:36:38 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TYPE "Role" AS ENUM ('USER', 'ADMIN');

CREATE TYPE "Provider" AS ENUM ('GOOGLE', 'NONE');

ALTER TABLE "accounts"."User" DROP COLUMN "lastPasswordChange",
ADD COLUMN "lastPasswordChange" timestamp(3)  NOT NULL ,
DROP COLUMN "provider",
ADD COLUMN "provider" "Provider" NOT NULL DEFAULT 'NONE',
DROP COLUMN "role",
ADD COLUMN "role" "Role" NOT NULL DEFAULT 'USER';
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200514202015-add-unique-directives-to-user-table..20200514213637-add-stricter-types-for-users
--- datamodel.dml
+++ datamodel.dml
@@ -1,20 +1,30 @@
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url      = env("DATABASE_URL")
 }
 generator client {
   provider = "prisma-client-js"
 }
 model User {
-  id                 Int    @default(autoincrement()) @id
+  id                 Int      @default(autoincrement()) @id
   picture            String
-  provider           String
-  username           String @unique
-  email              String @unique
+  provider           Provider @default(NONE)
+  username           String   @unique
+  email              String   @unique
   name               String
   password           String
-  role               String
-  lastPasswordChange String
+  role               Role     @default(USER)
+  lastPasswordChange DateTime
+}
+
+enum Role {
+  USER
+  ADMIN
+}
+
+enum Provider {
+  GOOGLE
+  NONE
 }
```
